{"version":3,"file":"user.js","sources":["store/user.js"],"sourcesContent":["// store/user.js\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\n\n// 定义一个名为 'user' 的 store\nexport const useUserStore = defineStore('user', () => {\n\t// 用户信息\n\tconst userInfo = ref({});\n\t// 登录凭证 Token\n\tconst token = ref(uni.getStorageSync('uni_id_token') || '');\n\n\t/**\n\t * 保存 Token\n\t * @param {string} newToken - 新的 Token\n\t */\n\tfunction setToken(newToken) {\n\t\ttoken.value = newToken;\n\t\tuni.setStorageSync('uni_id_token', newToken);\n\t}\n\n\t/**\n\t * 保存用户信息\n\t * @param {object} newInfo - 新的用户信息\n\t */\n\tfunction setUserInfo(newInfo) {\n\t\tuserInfo.value = newInfo;\n\t}\n\n\t/**\n\t * 退出登录\n\t */\n\tfunction logout() {\n\t\ttoken.value = '';\n\t\tuserInfo.value = {};\n\t\tuni.removeStorageSync('uni_id_token');\n\t\tconsole.log('用户已退出');\n\t}\n\n\treturn {\n\t\tuserInfo,\n\t\ttoken,\n\t\tsetToken,\n\t\tsetUserInfo,\n\t\tlogout\n\t};\n});"],"names":["defineStore","ref","uni"],"mappings":";;AAKY,MAAC,eAAeA,cAAAA,YAAY,QAAQ,MAAM;AAErD,QAAM,WAAWC,kBAAI,CAAA,CAAE;AAEvB,QAAM,QAAQA,cAAAA,IAAIC,cAAG,MAAC,eAAe,cAAc,KAAK,EAAE;AAM1D,WAAS,SAAS,UAAU;AAC3B,UAAM,QAAQ;AACdA,kBAAAA,MAAI,eAAe,gBAAgB,QAAQ;AAAA,EAC3C;AAMD,WAAS,YAAY,SAAS;AAC7B,aAAS,QAAQ;AAAA,EACjB;AAKD,WAAS,SAAS;AACjB,UAAM,QAAQ;AACd,aAAS,QAAQ;AACjBA,wBAAI,kBAAkB,cAAc;AACpCA,kBAAAA,MAAY,MAAA,OAAA,uBAAA,OAAO;AAAA,EACnB;AAED,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,CAAC;;"}