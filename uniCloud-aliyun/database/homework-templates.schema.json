// 文件路径: uniCloud/database/homework-templates.schema.json
{
	"bsonType": "object",
	"required": ["teacher_id", "title", "content_blocks"],
	"permission": {
		"read": "doc.teacher_id == auth.uid",
		"create": "'CREATE_HOMEWORK' in auth.permission",
		"update": "doc.teacher_id == auth.uid",
		"delete": "doc.teacher_id == auth.uid"
	},
	"properties": {
		"_id": { "description": "ID" },
		"teacher_id": { "bsonType": "string", "foreignKey": "uni-id-users._id" },
		"school_ids": { "bsonType": "string", "foreignKey": "schools._id" },
		"title": { "bsonType": "string", "title": "作业题目" },
		"content": { "bsonType": "string", "title": "作业内容" },
		"content_blocks": {
			"bsonType": "array",
			"title": "作业提交项",
			"items": {
				"bsonType": "object",
				"required": ["type", "label"],
				"properties": {
					"type": { "bsonType": "string", "description": "类型 (image, text, video, audio, document, file)" },
					"label": { "bsonType": "string", "description": "提示文字" },
					"multiple": { "bsonType": "bool", "description": "是否允许多文件上传", "defaultValue": false }
				}
			}
		},
		"status": { "bsonType": "string", "defaultValue": "draft" },
		"create_date": { "bsonType": "timestamp", "forceDefaultValue": { "$env": "now" } }
	}
}